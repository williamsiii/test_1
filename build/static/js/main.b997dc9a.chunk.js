(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,n){e.exports=n.p+"static/media/loader.91931453.gif"},42:function(e,t,n){e.exports=n(71)},47:function(e,t,n){},49:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),o=n.n(i),s=n(14),c=(n(47),n(4)),l=n(5),u=n(7),h=n(6),m=n(8),p=(n(48),n(49),n(16)),d=n(50).default,g=["","\u0410\u0431\u0430\u043a\u0430\u043d","\u0410\u0437\u043e\u0432","\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u043e\u0432","\u0410\u043b\u0435\u043a\u0441\u0438\u043d","\u0410\u043b\u044c\u043c\u0435\u0442\u044c\u0435\u0432\u0441\u043a","\u0410\u043d\u0430\u043f\u0430","\u0410\u043d\u0433\u0430\u0440\u0441\u043a","\u0410\u043d\u0436\u0435\u0440\u043e-\u0421\u0443\u0434\u0436\u0435\u043d\u0441\u043a","\u0410\u043f\u0430\u0442\u0438\u0442\u044b","\u0410\u0440\u0437\u0430\u043c\u0430\u0441","\u0410\u0440\u043c\u0430\u0432\u0438\u0440","\u0410\u0440\u0441\u0435\u043d\u044c\u0435\u0432","\u0410\u0440\u0442\u0435\u043c","\u0410\u0440\u0445\u0430\u043d\u0433\u0435\u043b\u044c\u0441\u043a","\u0410\u0441\u0431\u0435\u0441\u0442","\u0410\u0441\u0442\u0440\u0430\u0445\u0430\u043d\u044c","\u0410\u0447\u0438\u043d\u0441\u043a","\u0411\u0430\u043b\u0430\u043a\u043e\u0432\u043e","\u0411\u0430\u043b\u0430\u0445\u043d\u0430","\u0411\u0430\u043b\u0430\u0448\u0438\u0445\u0430","\u0411\u0430\u043b\u0430\u0448\u043e\u0432","\u0411\u0430\u0440\u043d\u0430\u0443\u043b","\u0411\u0430\u0442\u0430\u0439\u0441\u043a","\u0411\u0435\u043b\u0433\u043e\u0440\u043e\u0434","\u0411\u0435\u043b\u0435\u0431\u0435\u0439","\u0411\u0435\u043b\u043e\u0432\u043e","\u0411\u0435\u043b\u043e\u0433\u043e\u0440\u0441\u043a (\u0410\u043c\u0443\u0440\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c)","\u0411\u0435\u043b\u043e\u0440\u0435\u0446\u043a","\u0411\u0435\u043b\u043e\u0440\u0435\u0447\u0435\u043d\u0441\u043a","\u0411\u0435\u0440\u0434\u0441\u043a","\u0411\u0435\u0440\u0435\u0437\u043d\u0438\u043a\u0438"].map(function(e){return{value:e,label:e}}),b=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).fileInput=null,n.state={titleValid:!0,descriptionValid:!0,numberValid:!0},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){if(e.obj&&e.obj.image&&0===e.obj.image.length){var n=document.getElementById("canvas");n&&(n.height=0)}else e.obj&&e.obj.image&&this.changeImage(e.obj.image);return!0}},{key:"checkValid",value:function(e){return Boolean(this.state[e])?"hide":"error"}},{key:"onChangeTitle",value:function(e){this.props.onChangeTitle&&this.props.onChangeTitle(e)}},{key:"onChangeDescription",value:function(e){this.props.onChangeDescription&&this.props.onChangeDescription(e)}},{key:"onChangeNumber",value:function(e){this.props.onChangeNumber&&this.props.onChangeNumber(e)}},{key:"onCityChange",value:function(e){this.props.onCityChange&&this.props.onCityChange(e)}},{key:"onFileChange",value:function(e){this.getBase64(e[0])}},{key:"onSubmit",value:function(e){e.preventDefault();var t=!0,n=!0,a=!0;(0===this.props.obj.title.length||this.props.obj.title.length>100)&&(t=!1),this.setState({titleValid:t}),this.props.obj.description.length>300&&(n=!1),this.setState({descriptionValid:n}),this.props.obj.number.match(/^\+7\(\d{3}\)\d{3}-\d{2}-\d{2}$/)||(a=!1),this.setState({numberValid:a}),Number(a)*Number(n)*Number(a)&&this.props.onSubmit&&this.props.onSubmit(),document.getElementById("canvas").height=0,this.fileInput&&(this.fileInput.value="")}},{key:"getBase64",value:function(e){var t=this,n=new FileReader;n.readAsDataURL(e),n.onload=function(){t.changeImage(n.result),t.props.onImageChange&&t.props.onImageChange(n.result)}}},{key:"changeImage",value:function(e){var t=new Image;t.onload=function(){var e=document.getElementById("canvas"),n=e.getContext("2d");e.width=t.width,e.height=t.height,n&&n.drawImage(t,0,0)},t.src=e}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.onSubmit(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435:  "),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:this.props.obj.title,maxLength:100,onChange:function(t){return e.onChangeTitle(t)}}),r.a.createElement("div",{className:this.checkValid("titleValid")},"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f. \u041d\u0435 \u0431\u043e\u043b\u0435\u0435 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",value:this.props.obj.description,maxLength:300,onChange:function(t){return e.onChangeDescription(t)}}),r.a.createElement("div",{className:this.checkValid("descriptionValid")},"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 300 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430: "),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"+7(999)999-99-99",value:this.props.obj.number,onChange:function(t){return e.onChangeNumber(t)}}),r.a.createElement("div",{className:this.checkValid("numberValid")},"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f. \u0424\u043e\u0440\u043c\u0430\u0442 \u0432\u0432\u043e\u0434\u0430: +7(999)999-99-99")),r.a.createElement("div",{className:"form-group"},r.a.createElement(d,{value:this.props.obj.city,placeholder:this.props.obj.city||"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",onChange:function(t){return e.onCityChange(t)},options:g})),r.a.createElement("div",{className:"form-group"},r.a.createElement("canvas",{id:"canvas",height:"0"}),r.a.createElement("input",{ref:function(t){return e.fileInput=t},type:"file",accept:"image/*",className:"form-control",onChange:function(t){return e.onFileChange(t.target.files)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:this.props.action||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",className:"btn btn-primary"})))}}]),t}(r.a.Component),f=n(12),v=n(15),E=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={id:0,title:"",description:"",number:"",city:"",image:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onChangeTitle",value:function(e){this.setState({title:e.currentTarget.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.currentTarget.value})}},{key:"onChangeNumber",value:function(e){this.setState({number:e.currentTarget.value})}},{key:"onCityChange",value:function(e){this.setState({city:e.value})}},{key:"onImageChange",value:function(e){this.setState({image:e})}},{key:"onSubmit",value:function(){var e=localStorage.getItem("ads")?JSON.parse(localStorage.getItem("ads")):{ads:[]},t={id:e.ads.length?e.ads[e.ads.length-1].id+1:0,title:this.state.title,description:this.state.description,number:this.state.number,city:this.state.city,image:this.state.image};e.ads.push(t),this.props.addItem({ads:t}),localStorage.setItem("ads",JSON.stringify(e)),this.setState({title:"",description:"",number:"",city:"",image:""})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435"),r.a.createElement(b,{style:{marginTop:10},obj:this.state,action:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",onSubmit:function(){return e.onSubmit()},onChangeTitle:function(t){return e.onChangeTitle(t)},onChangeDescription:function(t){return e.onChangeDescription(t)},onChangeNumber:function(t){return e.onChangeNumber(t)},onCityChange:function(t){return e.onCityChange(t)},onImageChange:function(t){return e.onImageChange(t)}}))}}]),t}(r.a.Component),y=Object(f.b)(function(e){return{store:e}},function(e){return{addItem:function(t){return e((n=t,Object(v.a)({type:"ADD_ITEM"},n)));var n}}})(E),C=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).ads=null,n.id=0,n.state={id:0,title:"",description:"",number:"",city:"",image:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;try{this.id=Number(this.props.match.params.id),this.ads=JSON.parse(localStorage.getItem("ads"));var t=this.ads.ads.filter(function(t){return t.id===e.id})[0];this.setState({id:this.id,title:t.title,description:t.description,number:t.number,city:t.city,image:t.image})}catch(n){throw Error(n)}}},{key:"onChangeTitle",value:function(e){this.setState({title:e.currentTarget.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.currentTarget.value})}},{key:"onChangeNumber",value:function(e){this.setState({number:e.currentTarget.value})}},{key:"onCityChange",value:function(e){this.setState({city:e.value})}},{key:"onImageChange",value:function(e){this.setState({image:e})}},{key:"onSubmit",value:function(){var e=this,t={id:this.id,title:this.state.title,description:this.state.description,number:this.state.number,city:this.state.city,image:this.state.image};this.ads.ads=this.ads.ads.map(function(n){return n.id===e.id?t:n}),this.props.updateItem({ad:t});var n=JSON.stringify(this.ads);localStorage.setItem("ads",n),this.props.history.push("/read")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{marginTop:10}},r.a.createElement("h3",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435"),r.a.createElement(b,{obj:this.state,onSubmit:function(){return e.onSubmit()},onChangeTitle:function(t){return e.onChangeTitle(t)},onChangeDescription:function(t){return e.onChangeDescription(t)},onChangeNumber:function(t){return e.onChangeNumber(t)},onCityChange:function(t){return e.onCityChange(t)},onImageChange:function(t){return e.onImageChange(t)}}))}}]),t}(r.a.Component),j=Object(f.b)(function(){return{}},function(e){return{updateItem:function(t){return e((n=t,Object(v.a)({type:"UPDATE_ITEM"},n)));var n}}})(C),N=n(25),S=n.n(N),k=n(37),O=n(38),I=n.n(O),T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isLoaded:!1},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getAuthor()}},{key:"getAuthor",value:function(){var e=Object(k.a)(S.a.mark(function e(){var t,n,a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.floor(3*Math.random())+1,e.prev=1,e.next=4,fetch("http://my-json-server.typicode.com/williamsiii/test_1/authors/".concat(t),{mode:"cors",method:"GET",headers:{Accept:"application/json"}});case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,this.props.assignAdToAuthor(this.props.obj.id,a.name),this.setState({isLoaded:!0}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[1,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("tr",null,r.a.createElement("td",null,this.props.obj.title),r.a.createElement("td",null,this.props.obj.description),r.a.createElement("td",null,this.props.obj.number),r.a.createElement("td",null,this.props.obj.city),r.a.createElement("td",null,this.state.isLoaded?this.props.obj.name:r.a.createElement("img",{width:"40",height:"30",src:I.a,alt:"loading..."})),r.a.createElement("td",null,r.a.createElement(s.b,{to:"/update/"+this.props.obj.id,className:"btn btn-primary"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(t){return e.props.onDelete(e.props.obj.id)},className:"btn btn-danger"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}}]),t}(r.a.Component),D=Object(f.b)(function(){return{}},function(e){return{assignAdToAuthor:function(t,n){return e(function(e,t){return{type:"ASSIGN_AD",adId:e,name:t}}(t,n))}}})(T),w=function(e){function t(e){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("ads");if(e){var t=JSON.parse(e);t.ads&&this.setState({ads:t.ads})}}},{key:"onDelete",value:function(e){var t=localStorage.getItem("ads");if(t){var n=JSON.parse(t);n.ads=n.ads.filter(function(t){return t.id!==e}),n.ads&&this.setState({ads:n.ads}),this.props.deleteItem(e),localStorage.setItem("ads",JSON.stringify(n))}}},{key:"rows",value:function(){var e=this,t=this.props.store.pageSize,n=this.props.store.page,a=this.props.store.adsList.slice(t*n,t*(n+1));return a.map(function(a,i){return r.a.createElement(D,{obj:a,onDelete:function(t){return e.onDelete(t)},key:t*n+i})})}},{key:"onPrevPage",value:function(){this.props.changePage(--this.props.store.page)}},{key:"onNextPage",value:function(){this.props.changePage(++this.props.store.page)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0439"),r.a.createElement("table",{className:"table table-striped",style:{marginTop:20}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("th",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement("th",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),r.a.createElement("th",null,"\u0413\u043e\u0440\u043e\u0434"),r.a.createElement("th",null,"\u0410\u0432\u0442\u043e\u0440"),r.a.createElement("th",{colSpan:2},"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"))),r.a.createElement("tbody",null,this.rows())),r.a.createElement("button",{className:"btn",onClick:function(){return e.onPrevPage()}},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement("button",{className:"btn",onClick:function(){return e.onNextPage()}},"\u0412\u043f\u0435\u0440\u0451\u0434"))}}]),t}(r.a.Component),A=Object(f.b)(function(e){return{store:e}},function(e){return{deleteItem:function(t){return e({type:"DELETE_ITEM",id:t})},changePage:function(t){return e(function(e){return{type:"CHANGE_PAGE",page:e}}(t))}}})(w),L=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(s.a,null,r.a.createElement("div",{className:"container"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(s.b,{to:"/",className:"navbar-brand"},"\u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f"),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/",className:"nav-link"},"\u0421\u043f\u0438\u0441\u043e\u043a")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.b,{to:"/create",className:"nav-link"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))," ",r.a.createElement("br",null),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/create",component:y}),r.a.createElement(p.a,{path:"/update/:id",component:j}),r.a.createElement(p.a,{path:"/",component:A}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=n(20),x=n(40),V=function(e,t){switch(t.type){case"ADD_ITEM":return e.adsList.push(t.ads),e;case"UPDATE_ITEM":return Object(v.a)({},e,{adsList:e.adsList.map(function(e){return e.id===t.ad.id?t.ad:e})});case"DELETE_ITEM":return Object(v.a)({},e,{adsList:e.adsList.filter(function(e){return e.id!==t.id})});case"ASSIGN_AD":return Object(v.a)({},e,{adsList:e.adsList.map(function(e){return e.id!==t.adId?e:Object(v.a)({},e,{name:t.name})})});case"CHANGE_PAGE":var n=t.page;return n<0&&(n=0),n>e.totalPages-1&&(n=e.totalPages-1),Object(v.a)({},e,{page:n});default:return e}},M={adsList:[],page:0,pageSize:0,totalPages:0};var _=localStorage.getItem("ads")?JSON.parse(localStorage.getItem("ads")).ads:[],J={adsList:_,page:0,pageSize:5,totalPages:Math.ceil(_.length/5)};o.a.render(r.a.createElement(f.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return Object(P.c)(V,e,Object(P.a)(x.a))}(J)},r.a.createElement(s.a,null,r.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[42,1,2]]]);
//# sourceMappingURL=main.b997dc9a.chunk.js.map